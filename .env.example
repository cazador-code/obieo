# ===========================================
# Obieo Environment Variables
# ===========================================
# Copy this to .env.local and fill in values

# ----- Required -----

# Clerk (auth)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=YOUR_PUBLISHABLE_KEY
CLERK_SECRET_KEY=YOUR_SECRET_KEY

# Anthropic (for AI visibility analysis)
ANTHROPIC_API_KEY=sk-ant-...

# Resend (for emails)
RESEND_API_KEY=re_...

# GoHighLevel (CRM webhook)
GHL_WEBHOOK_URL=https://...

# ----- AI Visibility Quiz -----

# Google Places API (for business name autocomplete)
# Get from: https://console.cloud.google.com/apis/credentials
# Enable: Places API, Maps JavaScript API
NEXT_PUBLIC_GOOGLE_PLACES_API_KEY=AIza...

# Email verification (ZeroBounce)
# Get from: https://www.zerobounce.net/members/apikey
# 100 free verifications/month
ZEROBOUNCE_API_KEY=...

# PageSpeed Insights (optional - works without, but higher rate limits with key)
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_PAGESPEED_API_KEY=AIza...

# ----- Twilio SMS Verification -----

# Twilio Account SID
TWILIO_ACCOUNT_SID=AC...

# Twilio Auth Token
TWILIO_AUTH_TOKEN=...

# Twilio Verify Service SID (create at console.twilio.com > Verify > Services)
TWILIO_VERIFY_SERVICE_SID=VA...

# ----- Sanity CMS (optional) -----

NEXT_PUBLIC_SANITY_PROJECT_ID=
NEXT_PUBLIC_SANITY_DATASET=production
SANITY_API_TOKEN=

# ----- Vercel KV (for rate limiting) -----
#
# NOTE: `@vercel/kv` reads `KV_REST_API_URL` / `KV_REST_API_TOKEN`.
# When you connect Vercel KV to a project, Vercel automatically injects these vars.
#
# (We also accept the `VERCEL_KV_*` aliases in some scripts/docs for convenience.)

KV_REST_API_URL=
KV_REST_API_TOKEN=
VERCEL_KV_REST_API_URL=
VERCEL_KV_REST_API_TOKEN=

# ----- Tracking (optional) -----

FB_CONVERSIONS_API_TOKEN=
FB_PIXEL_ID=

# ----- Notifications -----

NOTIFICATION_EMAIL=hunter@obieo.com
# Optional comma-separated ops recipients for onboarding/replacement events
ONBOARDING_NOTIFICATION_EMAILS=
LEAD_OPS_NOTIFICATION_EMAILS=
# Optional sender used for outbound ops notifications via Resend
RESEND_FROM_EMAIL=noreply@obieo.com
# Leadgen Stripe runtime switch. Keep false while using Ignition/Whop payment confirmation flow.
LEADGEN_STRIPE_ACTIVE=false

# ----- Stripe Lead Billing (pay-as-you-go) -----

# Stripe secret key (server-side only)
STRIPE_SECRET_KEY=sk_live_...
# Stripe webhook signing secret for /api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=whsec_...
# Pinning API version keeps legacy metered usage records compatible.
STRIPE_API_VERSION=2024-10-28.acacia
# Optional: default product/price to reuse for lead billing provisioning
STRIPE_DEFAULT_LEAD_PRODUCT_ID=
STRIPE_DEFAULT_LEAD_PRICE_ID=
# Optional: pin upfront prices to avoid catalog drift/duplicates
# - $1 one-time "Card Verification Charge" (pay-per-lead model)
STRIPE_CARD_VERIFICATION_PRICE_ID=
# - $400 one-time "10 Lead Upfront Bundle" (40 lead commitment model)
STRIPE_UPFRONT_BUNDLE_PRICE_ID=
# Optional: $1,600 paid-in-full checkout handled externally (Whop/Ignition), but supported if you want it here.
STRIPE_PAID_IN_FULL_PRICE_ID=
# - $40 one-time "First Lead Charge" (pay-per-lead $40 first lead model)
STRIPE_PAY_PER_LEAD_FIRST_LEAD_PRICE_ID=
# Optional return URLs for onboarding checkout sessions
STRIPE_ONBOARDING_RETURN_BASE_URL=https://www.obieo.com
STRIPE_ONBOARDING_SUCCESS_URL=https://www.obieo.com/checkout/success?session_id={CHECKOUT_SESSION_ID}
STRIPE_ONBOARDING_CANCEL_URL=https://www.obieo.com/checkout/cancel
# Internal QA: apply a Stripe discount automatically in non-production environments.
# Use a live coupon/promo code only for internal testing; never commit real IDs to git.
STRIPE_INTERNAL_TEST_COUPON_ID=
STRIPE_INTERNAL_TEST_PROMOTION_CODE_ID=
# Customer login destinations used by Stripe activation webhook
CLIENT_PORTAL_LOGIN_URL=https://www.obieo.com/sign-in
CLERK_INVITATION_REDIRECT_URL=https://www.obieo.com/portal

# ----- Internal Tools (Basic Auth) -----
# Protect /internal/leadgen/payment-link in production.
INTERNAL_LEADGEN_BASIC_AUTH_USER=
INTERNAL_LEADGEN_BASIC_AUTH_PASS=

# Optional mapping used by /api/webhooks/ghl/lead-delivered.
# Keys can be a client key, client email, or company name (all normalized to lowercase).
# Values can be either the subscription item id string OR an object with { "subscriptionItemId": "si_..." }.
# Example:
# {"acme-hvac":"si_123","billing@acme.com":"si_123","acme hvac":{"subscriptionItemId":"si_123"}}
STRIPE_LEAD_BILLING_MAP_JSON=

# ----- Lead Gen Portal (Convex + Auth + Whop + GHL) -----

# NextAuth / Auth.js
NEXTAUTH_SECRET=
# Used to generate correct magic link URLs in email (set to your production URL on Vercel)
NEXTAUTH_URL=http://localhost:3000

# Convex deployment URL (from Convex dashboard)
CONVEX_URL=

# Shared secret used by NextAuth <-> Convex adapter functions
CONVEX_AUTH_ADAPTER_SECRET=

# Convex custom JWT provider settings (see convex/auth.config.ts)
CONVEX_JWT_ISSUER=
CONVEX_JWKS_URL=
CONVEX_JWT_PRIVATE_KEY_PEM=

# Whop
WHOP_API_KEY=
WHOP_WEBHOOK_SECRET=
WHOP_COMPANY_ID=
WHOP_PRODUCT_ID=

# Public purchase URL for the default 40-lead package
NEXT_PUBLIC_WHOP_DEFAULT_PURCHASE_URL=

# GHL lead-delivered webhook (Bearer secret)
GHL_LEAD_DELIVERED_WEBHOOK_SECRET=
# Airtable lead-delivered webhook (Bearer secret)
AIRTABLE_LEAD_DELIVERED_WEBHOOK_SECRET=
# Optional fallback map when webhook payload does not include portalKey.
# JSON format: {"business name":"portal-key"}
AIRTABLE_PORTAL_KEY_MAP_JSON=
# Optional dedicated secrets for direct onboarding/replacement APIs
CLIENT_ONBOARDING_API_SECRET=
LEAD_REPLACEMENT_API_SECRET=
LEAD_REPLACEMENT_ADMIN_API_SECRET=

# Internal admin gate (Lead Gen Portal)
# JWT secret should be 32+ characters (used to sign short-lived internal tokens)
JWT_SECRET=
# Password used to get an internal JWT (for /internal/* admin pages)
INTERNAL_TOOL_PASSWORD=
